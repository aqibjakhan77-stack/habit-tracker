{\rtf1\ansi\ansicpg1252\cocoartf2865
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fswiss\fcharset0 Helvetica;}
{\colortbl;\red255\green255\blue255;}
{\*\expandedcolortbl;;}
\paperw11900\paperh16840\margl1440\margr1440\vieww11520\viewh8400\viewkind0
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\pardirnatural\partightenfactor0

\f0\fs24 \cf0 <!DOCTYPE html>\
<html lang="en">\
<head>\
    <meta charset="UTF-8">\
    <meta name="viewport" content="width=device-width, initial-scale=1.0">\
    <title>Habit Tracker - Aaj Se Shuru</title>\
    <link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoiSGFiaXQgVHJhY2tlciIsInNob3J0X25hbWUiOiJIYWJpdHMiLCJzdGFydF91cmwiOiIvIiwiZGlzcGxheSI6InN0YW5kYWxvbmUiLCJiYWNrZ3JvdW5kX2NvbG9yIjoiIzEwYjk4MSIsInRoZW1lX2NvbG9yIjoiIzEwYjk4MSIsImljb25zIjpbeyJzcmMiOiJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGRwWkhSb1BTSXlOREFpSUdobGFXZG9kRDBpTWpRd0lqNDhZMmx5WTJ4bElHTjRQU0l4TWpBaUlHTjVQU0l4TWpBaUlISTlJakV3TUNJZ1ptbHNiRDBpSXpFd1lqazRNU0lnTHo0OEwzTjJaejQ9IiwidHlwZSI6ImltYWdlL3N2Zyt4bWwiLCJzaXplcyI6IjI0MHgyNDAifV19">\
    <meta name="theme-color" content="#10b981">\
    <style>\
        body \{\
            box-sizing: border-box;\
        \}\
        \
        * \{\
            margin: 0;\
            padding: 0;\
            box-sizing: border-box;\
        \}\
\
        body \{\
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);\
            min-height: 100vh;\
            color: #1f2937;\
        \}\
\
        .container \{\
            max-width: 428px;\
            margin: 0 auto;\
            background: white;\
            min-height: 100vh;\
            box-shadow: 0 0 20px rgba(0,0,0,0.1);\
            position: relative;\
        \}\
\
        .header \{\
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);\
            color: white;\
            padding: 20px;\
            text-align: center;\
            position: sticky;\
            top: 0;\
            z-index: 100;\
        \}\
\
        .date-display \{\
            font-size: 18px;\
            font-weight: 600;\
            margin-bottom: 8px;\
        \}\
\
        .streak-summary \{\
            font-size: 14px;\
            opacity: 0.9;\
        \}\
\
        .nav-tabs \{\
            display: flex;\
            background: white;\
            border-bottom: 1px solid #e5e7eb;\
            position: sticky;\
            top: 88px;\
            z-index: 99;\
        \}\
\
        .nav-tab \{\
            flex: 1;\
            padding: 16px;\
            text-align: center;\
            background: none;\
            border: none;\
            cursor: pointer;\
            font-weight: 500;\
            color: #6b7280;\
            transition: all 0.2s;\
        \}\
\
        .nav-tab.active \{\
            color: #10b981;\
            border-bottom: 2px solid #10b981;\
        \}\
\
        .screen \{\
            display: none;\
            padding: 20px;\
            padding-bottom: 100px;\
        \}\
\
        .screen.active \{\
            display: block;\
        \}\
\
        .habit-card \{\
            background: white;\
            border-radius: 16px;\
            padding: 20px;\
            margin-bottom: 16px;\
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);\
            border-left: 4px solid #10b981;\
        \}\
\
        .habit-header \{\
            display: flex;\
            align-items: center;\
            margin-bottom: 16px;\
        \}\
\
        .habit-emoji \{\
            font-size: 24px;\
            margin-right: 12px;\
        \}\
\
        .habit-info \{\
            flex: 1;\
        \}\
\
        .habit-name \{\
            font-weight: 600;\
            font-size: 16px;\
            margin-bottom: 4px;\
        \}\
\
        .habit-time \{\
            font-size: 12px;\
            color: #6b7280;\
            background: #f3f4f6;\
            padding: 4px 8px;\
            border-radius: 8px;\
            display: inline-block;\
        \}\
\
        .habit-actions \{\
            display: flex;\
            gap: 8px;\
            margin-bottom: 12px;\
        \}\
\
        .action-btn \{\
            flex: 1;\
            padding: 12px;\
            border: none;\
            border-radius: 12px;\
            font-weight: 500;\
            cursor: pointer;\
            transition: all 0.2s;\
            font-size: 14px;\
        \}\
\
        .done-btn \{\
            background: #10b981;\
            color: white;\
        \}\
\
        .done-btn:hover \{\
            background: #059669;\
        \}\
\
        .done-btn.completed \{\
            background: #6b7280;\
            cursor: not-allowed;\
        \}\
\
        .skip-btn \{\
            background: #f59e0b;\
            color: white;\
        \}\
\
        .skip-btn:hover \{\
            background: #d97706;\
        \}\
\
        .snooze-btn \{\
            background: #6b7280;\
            color: white;\
        \}\
\
        .snooze-btn:hover \{\
            background: #4b5563;\
        \}\
\
        .habit-note \{\
            margin-top: 8px;\
        \}\
\
        .note-input \{\
            width: 100%;\
            padding: 8px 12px;\
            border: 1px solid #d1d5db;\
            border-radius: 8px;\
            font-size: 14px;\
            resize: none;\
        \}\
\
        .streak-info \{\
            display: flex;\
            justify-content: space-between;\
            font-size: 12px;\
            color: #6b7280;\
            margin-top: 8px;\
        \}\
\
        .fab \{\
            position: fixed;\
            bottom: 20px;\
            right: 20px;\
            width: 56px;\
            height: 56px;\
            background: #10b981;\
            border: none;\
            border-radius: 50%;\
            color: white;\
            font-size: 24px;\
            cursor: pointer;\
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);\
            transition: all 0.2s;\
            z-index: 1000;\
        \}\
\
        .fab:hover \{\
            transform: scale(1.1);\
            box-shadow: 0 6px 16px rgba(16, 185, 129, 0.5);\
        \}\
\
        .modal \{\
            display: none;\
            position: fixed;\
            top: 0;\
            left: 0;\
            width: 100%;\
            height: 100%;\
            background: rgba(0,0,0,0.5);\
            z-index: 2000;\
            align-items: center;\
            justify-content: center;\
        \}\
\
        .modal.active \{\
            display: flex;\
        \}\
\
        .modal-content \{\
            background: white;\
            border-radius: 16px;\
            padding: 24px;\
            margin: 20px;\
            max-width: 400px;\
            width: 100%;\
            max-height: 80vh;\
            overflow-y: auto;\
        \}\
\
        .modal-header \{\
            font-size: 20px;\
            font-weight: 600;\
            margin-bottom: 20px;\
            text-align: center;\
        \}\
\
        .form-group \{\
            margin-bottom: 16px;\
        \}\
\
        .form-label \{\
            display: block;\
            font-weight: 500;\
            margin-bottom: 8px;\
            color: #374151;\
        \}\
\
        .form-input \{\
            width: 100%;\
            padding: 12px;\
            border: 1px solid #d1d5db;\
            border-radius: 8px;\
            font-size: 16px;\
        \}\
\
        .form-input:focus \{\
            outline: none;\
            border-color: #10b981;\
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);\
        \}\
\
        .emoji-picker \{\
            display: grid;\
            grid-template-columns: repeat(6, 1fr);\
            gap: 8px;\
            margin-top: 8px;\
        \}\
\
        .emoji-option \{\
            padding: 8px;\
            border: 2px solid transparent;\
            border-radius: 8px;\
            cursor: pointer;\
            text-align: center;\
            font-size: 20px;\
            transition: all 0.2s;\
        \}\
\
        .emoji-option:hover, .emoji-option.selected \{\
            border-color: #10b981;\
            background: #f0fdf4;\
        \}\
\
        .color-picker \{\
            display: flex;\
            gap: 8px;\
            margin-top: 8px;\
        \}\
\
        .color-option \{\
            width: 32px;\
            height: 32px;\
            border-radius: 50%;\
            cursor: pointer;\
            border: 3px solid transparent;\
            transition: all 0.2s;\
        \}\
\
        .color-option.selected \{\
            border-color: #374151;\
            transform: scale(1.1);\
        \}\
\
        .frequency-options \{\
            display: flex;\
            gap: 8px;\
            margin-top: 8px;\
        \}\
\
        .frequency-btn \{\
            flex: 1;\
            padding: 8px 12px;\
            border: 1px solid #d1d5db;\
            border-radius: 8px;\
            background: white;\
            cursor: pointer;\
            font-size: 14px;\
            transition: all 0.2s;\
        \}\
\
        .frequency-btn.selected \{\
            background: #10b981;\
            color: white;\
            border-color: #10b981;\
        \}\
\
        .days-selector \{\
            display: grid;\
            grid-template-columns: repeat(7, 1fr);\
            gap: 4px;\
            margin-top: 8px;\
        \}\
\
        .day-btn \{\
            padding: 8px 4px;\
            border: 1px solid #d1d5db;\
            border-radius: 6px;\
            background: white;\
            cursor: pointer;\
            font-size: 12px;\
            text-align: center;\
            transition: all 0.2s;\
        \}\
\
        .day-btn.selected \{\
            background: #10b981;\
            color: white;\
            border-color: #10b981;\
        \}\
\
        .modal-actions \{\
            display: flex;\
            gap: 12px;\
            margin-top: 24px;\
        \}\
\
        .btn \{\
            flex: 1;\
            padding: 12px;\
            border: none;\
            border-radius: 8px;\
            font-weight: 500;\
            cursor: pointer;\
            transition: all 0.2s;\
        \}\
\
        .btn-primary \{\
            background: #10b981;\
            color: white;\
        \}\
\
        .btn-primary:hover \{\
            background: #059669;\
        \}\
\
        .btn-secondary \{\
            background: #f3f4f6;\
            color: #374151;\
        \}\
\
        .btn-secondary:hover \{\
            background: #e5e7eb;\
        \}\
\
        .empty-state \{\
            text-align: center;\
            padding: 40px 20px;\
            color: #6b7280;\
        \}\
\
        .empty-emoji \{\
            font-size: 48px;\
            margin-bottom: 16px;\
        \}\
\
        .empty-title \{\
            font-size: 18px;\
            font-weight: 600;\
            margin-bottom: 8px;\
        \}\
\
        .empty-subtitle \{\
            font-size: 14px;\
            line-height: 1.5;\
        \}\
\
        .insights-card \{\
            background: white;\
            border-radius: 16px;\
            padding: 20px;\
            margin-bottom: 16px;\
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);\
        \}\
\
        .insights-title \{\
            font-weight: 600;\
            margin-bottom: 12px;\
            color: #374151;\
        \}\
\
        .stat-grid \{\
            display: grid;\
            grid-template-columns: repeat(2, 1fr);\
            gap: 16px;\
        \}\
\
        .stat-item \{\
            text-align: center;\
            padding: 16px;\
            background: #f9fafb;\
            border-radius: 12px;\
        \}\
\
        .stat-value \{\
            font-size: 24px;\
            font-weight: 700;\
            color: #10b981;\
            margin-bottom: 4px;\
        \}\
\
        .stat-label \{\
            font-size: 12px;\
            color: #6b7280;\
        \}\
\
        .heatmap \{\
            display: grid;\
            grid-template-columns: repeat(7, 1fr);\
            gap: 2px;\
            margin-top: 12px;\
        \}\
\
        .heatmap-day \{\
            aspect-ratio: 1;\
            border-radius: 2px;\
            background: #f3f4f6;\
        \}\
\
        .heatmap-day.done \{\
            background: #10b981;\
        \}\
\
        .heatmap-day.missed \{\
            background: #ef4444;\
        \}\
\
        .heatmap-day.skipped \{\
            background: #3b82f6;\
        \}\
\
        .nudge-card \{\
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);\
            border-radius: 12px;\
            padding: 16px;\
            margin-bottom: 16px;\
            border-left: 4px solid #f59e0b;\
        \}\
\
        .nudge-text \{\
            font-weight: 500;\
            color: #92400e;\
        \}\
\
        .settings-item \{\
            display: flex;\
            justify-content: space-between;\
            align-items: center;\
            padding: 16px 0;\
            border-bottom: 1px solid #f3f4f6;\
        \}\
\
        .settings-label \{\
            font-weight: 500;\
            color: #374151;\
        \}\
\
        .toggle \{\
            position: relative;\
            width: 44px;\
            height: 24px;\
            background: #d1d5db;\
            border-radius: 12px;\
            cursor: pointer;\
            transition: all 0.2s;\
        \}\
\
        .toggle.active \{\
            background: #10b981;\
        \}\
\
        .toggle-slider \{\
            position: absolute;\
            top: 2px;\
            left: 2px;\
            width: 20px;\
            height: 20px;\
            background: white;\
            border-radius: 50%;\
            transition: all 0.2s;\
        \}\
\
        .toggle.active .toggle-slider \{\
            transform: translateX(20px);\
        \}\
\
        .onboarding \{\
            position: fixed;\
            top: 0;\
            left: 0;\
            width: 100%;\
            height: 100%;\
            background: white;\
            z-index: 3000;\
            display: flex;\
            flex-direction: column;\
            align-items: center;\
            justify-content: center;\
            padding: 40px;\
            text-align: center;\
        \}\
\
        .onboarding.hidden \{\
            display: none;\
        \}\
\
        .onboarding-emoji \{\
            font-size: 64px;\
            margin-bottom: 24px;\
        \}\
\
        .onboarding-title \{\
            font-size: 28px;\
            font-weight: 700;\
            margin-bottom: 12px;\
            color: #10b981;\
        \}\
\
        .onboarding-subtitle \{\
            font-size: 16px;\
            color: #6b7280;\
            margin-bottom: 32px;\
            line-height: 1.5;\
        \}\
\
        .template-grid \{\
            display: grid;\
            grid-template-columns: repeat(2, 1fr);\
            gap: 12px;\
            margin: 24px 0;\
            width: 100%;\
            max-width: 300px;\
        \}\
\
        .template-card \{\
            padding: 16px;\
            border: 2px solid #e5e7eb;\
            border-radius: 12px;\
            cursor: pointer;\
            transition: all 0.2s;\
            text-align: center;\
        \}\
\
        .template-card:hover, .template-card.selected \{\
            border-color: #10b981;\
            background: #f0fdf4;\
        \}\
\
        .template-emoji \{\
            font-size: 24px;\
            margin-bottom: 8px;\
        \}\
\
        .template-name \{\
            font-size: 14px;\
            font-weight: 500;\
        \}\
\
        @media (max-width: 480px) \{\
            .container \{\
                box-shadow: none;\
            \}\
            \
            .modal-content \{\
                margin: 10px;\
            \}\
            \
            .template-grid \{\
                grid-template-columns: 1fr;\
            \}\
        \}\
    </style>\
</head>\
<body>\
    <div class="container">\
        <!-- Onboarding -->\
        <div class="onboarding" id="onboarding">\
            <div class="onboarding-emoji">\uc0\u55356 \u57263 </div>\
            <h1 class="onboarding-title">Aaj Se Shuru!</h1>\
            <p class="onboarding-subtitle">Chhote habits, bade changes. Let's build consistency together.</p>\
            \
            <div class="template-grid" id="templateGrid">\
                <div class="template-card" data-template="water">\
                    <div class="template-emoji">\uc0\u55357 \u56487 </div>\
                    <div class="template-name">Paani Peena</div>\
                </div>\
                <div class="template-card" data-template="walk">\
                    <div class="template-emoji">\uc0\u55357 \u57014 </div>\
                    <div class="template-name">10-min Walk</div>\
                </div>\
                <div class="template-card" data-template="read">\
                    <div class="template-emoji">\uc0\u55357 \u56538 </div>\
                    <div class="template-name">5 Pages Padhna</div>\
                </div>\
                <div class="template-card" data-template="gym">\
                    <div class="template-emoji">\uc0\u55357 \u56490 </div>\
                    <div class="template-name">Gym Jana</div>\
                </div>\
                <div class="template-card" data-template="prayer">\
                    <div class="template-emoji">\uc0\u55358 \u56626 </div>\
                    <div class="template-name">Namaz/Prayer</div>\
                </div>\
                <div class="template-card" data-template="nosugar">\
                    <div class="template-emoji">\uc0\u55357 \u57003 </div>\
                    <div class="template-name">No Sugar</div>\
                </div>\
            </div>\
            \
            <button class="btn btn-primary" onclick="completeOnboarding()" style="width: 200px; margin-top: 20px;">\
                Shuru Karte Hain! \uc0\u55357 \u56960 \
            </button>\
        </div>\
\
        <!-- Header -->\
        <div class="header">\
            <div class="date-display" id="dateDisplay"></div>\
            <div class="streak-summary" id="streakSummary">Loading...</div>\
        </div>\
\
        <!-- Navigation -->\
        <div class="nav-tabs">\
            <button class="nav-tab active" onclick="switchTab('today')">Aaj</button>\
            <button class="nav-tab" onclick="switchTab('insights')">Insights</button>\
            <button class="nav-tab" onclick="switchTab('settings')">Settings</button>\
        </div>\
\
        <!-- Today Screen -->\
        <div class="screen active" id="todayScreen">\
            <div id="habitsContainer"></div>\
            <div class="empty-state" id="emptyState" style="display: none;">\
                <div class="empty-emoji">\uc0\u55356 \u57137 </div>\
                <div class="empty-title">Aaj se shuru karte hain!</div>\
                <div class="empty-subtitle">Ek chhota habit add karo aur consistency build karo.</div>\
            </div>\
        </div>\
\
        <!-- Insights Screen -->\
        <div class="screen" id="insightsScreen">\
            <div class="insights-card">\
                <div class="insights-title">Is Hafte Ka Performance</div>\
                <div class="stat-grid">\
                    <div class="stat-item">\
                        <div class="stat-value" id="weeklyCompletion">0%</div>\
                        <div class="stat-label">Completion Rate</div>\
                    </div>\
                    <div class="stat-item">\
                        <div class="stat-value" id="consistencyScore">0</div>\
                        <div class="stat-label">Consistency Score</div>\
                    </div>\
                </div>\
            </div>\
\
            <div class="insights-card">\
                <div class="insights-title">Streak Champions \uc0\u55356 \u57286 </div>\
                <div id="topStreaks"></div>\
            </div>\
\
            <div id="nudgeCards"></div>\
        </div>\
\
        <!-- Settings Screen -->\
        <div class="screen" id="settingsScreen">\
            <div class="insights-card">\
                <div class="insights-title">Preferences</div>\
                \
                <div class="settings-item">\
                    <div class="settings-label">Notifications</div>\
                    <div class="toggle active" onclick="toggleSetting('notifications')">\
                        <div class="toggle-slider"></div>\
                    </div>\
                </div>\
                \
                <div class="settings-item">\
                    <div class="settings-label">Dark Mode</div>\
                    <div class="toggle" onclick="toggleSetting('darkMode')">\
                        <div class="toggle-slider"></div>\
                    </div>\
                </div>\
                \
                <div class="settings-item">\
                    <div class="settings-label">Quiet Hours (11 PM - 6 AM)</div>\
                    <div class="toggle active" onclick="toggleSetting('quietHours')">\
                        <div class="toggle-slider"></div>\
                    </div>\
                </div>\
            </div>\
\
            <div class="insights-card">\
                <div class="insights-title">Data Management</div>\
                \
                <button class="btn btn-secondary" onclick="exportData()" style="width: 100%; margin-bottom: 12px;">\
                    \uc0\u55357 \u56522  Export CSV Data\
                </button>\
                \
                <button class="btn btn-secondary" onclick="backupData()" style="width: 100%; margin-bottom: 12px;">\
                    \uc0\u55357 \u56510  Backup Data\
                </button>\
                \
                <button class="btn btn-secondary" onclick="restoreData()" style="width: 100%;">\
                    \uc0\u55357 \u56549  Restore Data\
                </button>\
            </div>\
        </div>\
\
        <!-- FAB -->\
        <button class="fab" onclick="openHabitModal()">+</button>\
\
        <!-- Add/Edit Habit Modal -->\
        <div class="modal" id="habitModal">\
            <div class="modal-content">\
                <div class="modal-header">Naya Habit Add Karo</div>\
                \
                <div class="form-group">\
                    <label class="form-label">Habit Name</label>\
                    <input type="text" class="form-input" id="habitName" placeholder="e.g., Paani peena">\
                </div>\
\
                <div class="form-group">\
                    <label class="form-label">Emoji Choose Karo</label>\
                    <div class="emoji-picker" id="emojiPicker">\
                        <div class="emoji-option" data-emoji="\uc0\u55357 \u56487 ">\u55357 \u56487 </div>\
                        <div class="emoji-option" data-emoji="\uc0\u55357 \u57014 ">\u55357 \u57014 </div>\
                        <div class="emoji-option" data-emoji="\uc0\u55357 \u56538 ">\u55357 \u56538 </div>\
                        <div class="emoji-option" data-emoji="\uc0\u55357 \u56490 ">\u55357 \u56490 </div>\
                        <div class="emoji-option" data-emoji="\uc0\u55358 \u56626 ">\u55358 \u56626 </div>\
                        <div class="emoji-option" data-emoji="\uc0\u55358 \u56792 ">\u55358 \u56792 </div>\
                        <div class="emoji-option" data-emoji="\uc0\u55356 \u57166 ">\u55356 \u57166 </div>\
                        <div class="emoji-option" data-emoji="\uc0\u55357 \u56884 ">\u55357 \u56884 </div>\
                        <div class="emoji-option" data-emoji="\uc0\u55357 \u56561 ">\u55357 \u56561 </div>\
                        <div class="emoji-option" data-emoji="\uc0\u55356 \u57263 ">\u55356 \u57263 </div>\
                        <div class="emoji-option" data-emoji="\uc0\u9997 \u65039 ">\u9997 \u65039 </div>\
                        <div class="emoji-option" data-emoji="\uc0\u55356 \u57269 ">\u55356 \u57269 </div>\
                    </div>\
                </div>\
\
                <div class="form-group">\
                    <label class="form-label">Color Theme</label>\
                    <div class="color-picker">\
                        <div class="color-option selected" data-color="#10b981" style="background: #10b981;"></div>\
                        <div class="color-option" data-color="#3b82f6" style="background: #3b82f6;"></div>\
                        <div class="color-option" data-color="#f59e0b" style="background: #f59e0b;"></div>\
                        <div class="color-option" data-color="#ef4444" style="background: #ef4444;"></div>\
                        <div class="color-option" data-color="#8b5cf6" style="background: #8b5cf6;"></div>\
                        <div class="color-option" data-color="#ec4899" style="background: #ec4899;"></div>\
                    </div>\
                </div>\
\
                <div class="form-group">\
                    <label class="form-label">Frequency</label>\
                    <div class="frequency-options">\
                        <button class="frequency-btn selected" data-freq="daily">Daily</button>\
                        <button class="frequency-btn" data-freq="specific">Specific Days</button>\
                        <button class="frequency-btn" data-freq="weekly">X times/week</button>\
                    </div>\
                </div>\
\
                <div class="form-group" id="daysSelector" style="display: none;">\
                    <label class="form-label">Days Select Karo</label>\
                    <div class="days-selector">\
                        <button class="day-btn" data-day="0">Sun</button>\
                        <button class="day-btn" data-day="1">Mon</button>\
                        <button class="day-btn" data-day="2">Tue</button>\
                        <button class="day-btn" data-day="3">Wed</button>\
                        <button class="day-btn" data-day="4">Thu</button>\
                        <button class="day-btn" data-day="5">Fri</button>\
                        <button class="day-btn" data-day="6">Sat</button>\
                    </div>\
                </div>\
\
                <div class="form-group" id="weeklyTarget" style="display: none;">\
                    <label class="form-label">Times per Week</label>\
                    <input type="number" class="form-input" id="timesPerWeek" min="1" max="7" value="3">\
                </div>\
\
                <div class="form-group">\
                    <label class="form-label">Preferred Time</label>\
                    <input type="time" class="form-input" id="preferredTime" value="09:00">\
                </div>\
\
                <div class="form-group">\
                    <label class="form-label">Target Streak (Optional)</label>\
                    <input type="number" class="form-input" id="targetStreak" placeholder="e.g., 30 days">\
                </div>\
\
                <div class="form-group">\
                    <label class="form-label">Notes (Optional)</label>\
                    <textarea class="form-input" id="habitNotes" rows="2" placeholder="Koi extra details..."></textarea>\
                </div>\
\
                <div class="modal-actions">\
                    <button class="btn btn-secondary" onclick="closeHabitModal()">Cancel</button>\
                    <button class="btn btn-primary" onclick="saveHabit()">Save Habit</button>\
                </div>\
            </div>\
        </div>\
    </div>\
\
    <script>\
        // Global state\
        let habits = [];\
        let checkins = [];\
        let settings = \{\
            notifications: true,\
            darkMode: false,\
            quietHours: true,\
            timezone: 'Asia/Kolkata'\
        \};\
        let selectedEmoji = '\uc0\u55357 \u56487 ';\
        let selectedColor = '#10b981';\
        let selectedFrequency = 'daily';\
        let selectedDays = [];\
        let editingHabitId = null;\
\
        // Initialize app\
        document.addEventListener('DOMContentLoaded', function() \{\
            loadData();\
            updateDateDisplay();\
            \
            // Check if first time user\
            if (localStorage.getItem('hasCompletedOnboarding') !== 'true') \{\
                document.getElementById('onboarding').style.display = 'flex';\
            \} else \{\
                document.getElementById('onboarding').classList.add('hidden');\
                renderTodayHabits();\
                updateInsights();\
            \}\
\
            // Setup event listeners\
            setupEventListeners();\
            \
            // Register service worker for PWA\
            if ('serviceWorker' in navigator) \{\
                navigator.serviceWorker.register('data:text/javascript;base64,c2VsZi5hZGRFdmVudExpc3RlbmVyKCdpbnN0YWxsJywgZXZlbnQgPT4gewogIGV2ZW50LndhaXRVbnRpbChzZWxmLnNraXBXYWl0aW5nKCkpOwp9KTsKCnNlbGYuYWRkRXZlbnRMaXN0ZW5lcignYWN0aXZhdGUnLCBldmVudCA9PiB7CiAgZXZlbnQud2FpdFVudGlsKHNlbGYuY2xpZW50cy5jbGFpbSgpKTsKfSk7');\
            \}\
        \});\
\
        function setupEventListeners() \{\
            // Emoji picker\
            document.querySelectorAll('.emoji-option').forEach(option => \{\
                option.addEventListener('click', function() \{\
                    document.querySelectorAll('.emoji-option').forEach(o => o.classList.remove('selected'));\
                    this.classList.add('selected');\
                    selectedEmoji = this.dataset.emoji;\
                \});\
            \});\
\
            // Color picker\
            document.querySelectorAll('.color-option').forEach(option => \{\
                option.addEventListener('click', function() \{\
                    document.querySelectorAll('.color-option').forEach(o => o.classList.remove('selected'));\
                    this.classList.add('selected');\
                    selectedColor = this.dataset.color;\
                \});\
            \});\
\
            // Frequency selector\
            document.querySelectorAll('.frequency-btn').forEach(btn => \{\
                btn.addEventListener('click', function() \{\
                    document.querySelectorAll('.frequency-btn').forEach(b => b.classList.remove('selected'));\
                    this.classList.add('selected');\
                    selectedFrequency = this.dataset.freq;\
                    \
                    // Show/hide relevant options\
                    const daysSelector = document.getElementById('daysSelector');\
                    const weeklyTarget = document.getElementById('weeklyTarget');\
                    \
                    if (selectedFrequency === 'specific') \{\
                        daysSelector.style.display = 'block';\
                        weeklyTarget.style.display = 'none';\
                    \} else if (selectedFrequency === 'weekly') \{\
                        daysSelector.style.display = 'none';\
                        weeklyTarget.style.display = 'block';\
                    \} else \{\
                        daysSelector.style.display = 'none';\
                        weeklyTarget.style.display = 'none';\
                    \}\
                \});\
            \});\
\
            // Days selector\
            document.querySelectorAll('.day-btn').forEach(btn => \{\
                btn.addEventListener('click', function() \{\
                    const day = parseInt(this.dataset.day);\
                    if (selectedDays.includes(day)) \{\
                        selectedDays = selectedDays.filter(d => d !== day);\
                        this.classList.remove('selected');\
                    \} else \{\
                        selectedDays.push(day);\
                        this.classList.add('selected');\
                    \}\
                \});\
            \});\
\
            // Template selection\
            document.querySelectorAll('.template-card').forEach(card => \{\
                card.addEventListener('click', function() \{\
                    document.querySelectorAll('.template-card').forEach(c => c.classList.remove('selected'));\
                    this.classList.add('selected');\
                \});\
            \});\
        \}\
\
        function loadData() \{\
            const savedHabits = localStorage.getItem('habits');\
            const savedCheckins = localStorage.getItem('checkins');\
            const savedSettings = localStorage.getItem('settings');\
\
            if (savedHabits) habits = JSON.parse(savedHabits);\
            if (savedCheckins) checkins = JSON.parse(savedCheckins);\
            if (savedSettings) settings = \{ ...settings, ...JSON.parse(savedSettings) \};\
        \}\
\
        function saveData() \{\
            localStorage.setItem('habits', JSON.stringify(habits));\
            localStorage.setItem('checkins', JSON.stringify(checkins));\
            localStorage.setItem('settings', JSON.stringify(settings));\
        \}\
\
        function updateDateDisplay() \{\
            const now = new Date();\
            const options = \{ \
                weekday: 'long', \
                year: 'numeric', \
                month: 'long', \
                day: 'numeric',\
                timeZone: 'Asia/Kolkata'\
            \};\
            \
            document.getElementById('dateDisplay').textContent = now.toLocaleDateString('en-IN', options);\
            \
            // Update streak summary\
            const totalStreaks = habits.reduce((sum, habit) => sum + getCurrentStreak(habit.id), 0);\
            const activeHabits = habits.filter(h => !h.archived).length;\
            document.getElementById('streakSummary').textContent = \
                `$\{activeHabits\} habits \'95 $\{totalStreaks\} total streaks`;\
        \}\
\
        function completeOnboarding() \{\
            const selectedTemplates = document.querySelectorAll('.template-card.selected');\
            \
            // Create habits from selected templates\
            selectedTemplates.forEach(template => \{\
                const templateType = template.dataset.template;\
                const templateData = getTemplateData(templateType);\
                \
                const habit = \{\
                    id: Date.now() + Math.random(),\
                    name: templateData.name,\
                    emoji: templateData.emoji,\
                    color: templateData.color,\
                    frequency: 'daily',\
                    daysOfWeek: [],\
                    timesPerWeek: null,\
                    preferredTime: templateData.time,\
                    reminders: true,\
                    startDate: getTodayIST(),\
                    targetStreak: templateData.target,\
                    notes: '',\
                    archived: false,\
                    created: new Date().toISOString()\
                \};\
                \
                habits.push(habit);\
            \});\
\
            localStorage.setItem('hasCompletedOnboarding', 'true');\
            document.getElementById('onboarding').classList.add('hidden');\
            \
            saveData();\
            renderTodayHabits();\
            updateInsights();\
\
            // Request notification permission\
            if ('Notification' in window && Notification.permission === 'default') \{\
                Notification.requestPermission();\
            \}\
        \}\
\
        function getTemplateData(type) \{\
            const templates = \{\
                water: \{ name: 'Paani Peena', emoji: '\uc0\u55357 \u56487 ', color: '#3b82f6', time: '09:00', target: 30 \},\
                walk: \{ name: '10-min Walk', emoji: '\uc0\u55357 \u57014 ', color: '#10b981', time: '07:00', target: 21 \},\
                read: \{ name: '5 Pages Padhna', emoji: '\uc0\u55357 \u56538 ', color: '#8b5cf6', time: '21:00', target: 30 \},\
                gym: \{ name: 'Gym Jana', emoji: '\uc0\u55357 \u56490 ', color: '#ef4444', time: '06:00', target: 90 \},\
                prayer: \{ name: 'Namaz/Prayer', emoji: '\uc0\u55358 \u56626 ', color: '#f59e0b', time: '05:30', target: 365 \},\
                nosugar: \{ name: 'No Sugar', emoji: '\uc0\u55357 \u57003 ', color: '#ec4899', time: '12:00', target: 30 \}\
            \};\
            return templates[type] || templates.water;\
        \}\
\
        function switchTab(tab) \{\
            // Update nav tabs\
            document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));\
            event.target.classList.add('active');\
\
            // Update screens\
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));\
            document.getElementById(tab + 'Screen').classList.add('active');\
\
            // Update content based on tab\
            if (tab === 'today') \{\
                renderTodayHabits();\
            \} else if (tab === 'insights') \{\
                updateInsights();\
            \}\
        \}\
\
        function renderTodayHabits() \{\
            const container = document.getElementById('habitsContainer');\
            const emptyState = document.getElementById('emptyState');\
            const today = getTodayIST();\
            const todayHabits = habits.filter(habit => !habit.archived && isHabitPlannedForDate(habit, today));\
\
            if (todayHabits.length === 0) \{\
                container.innerHTML = '';\
                emptyState.style.display = 'block';\
                return;\
            \}\
\
            emptyState.style.display = 'none';\
            \
            container.innerHTML = todayHabits.map(habit => \{\
                const checkin = getCheckinForDate(habit.id, today);\
                const currentStreak = getCurrentStreak(habit.id);\
                const longestStreak = getLongestStreak(habit.id);\
                \
                return `\
                    <div class="habit-card" style="border-left-color: $\{habit.color\};">\
                        <div class="habit-header">\
                            <div class="habit-emoji">$\{habit.emoji\}</div>\
                            <div class="habit-info">\
                                <div class="habit-name">$\{habit.name\}</div>\
                                <div class="habit-time">$\{formatTime(habit.preferredTime)\}</div>\
                            </div>\
                        </div>\
                        \
                        <div class="habit-actions">\
                            <button class="action-btn done-btn $\{checkin?.status === 'done' ? 'completed' : ''\}" \
                                    onclick="markHabit('$\{habit.id\}', 'done')"\
                                    $\{checkin?.status === 'done' ? 'disabled' : ''\}>\
                                $\{checkin?.status === 'done' ? 'Ho gaya \uc0\u9989 ' : 'Ho gaya \u9989 '\}\
                            </button>\
                            <button class="action-btn skip-btn" onclick="markHabit('$\{habit.id\}', 'skipped')">\
                                Skip\
                            </button>\
                            <button class="action-btn snooze-btn" onclick="snoozeHabit('$\{habit.id\}')">\
                                Baad mein\
                            </button>\
                        </div>\
                        \
                        <div class="habit-note">\
                            <textarea class="note-input" placeholder="Quick note (optional)..." \
                                      maxlength="120" id="note-$\{habit.id\}">$\{checkin?.note || ''\}</textarea>\
                        </div>\
                        \
                        <div class="streak-info">\
                            <span>Current: $\{currentStreak\} days</span>\
                            <span>Best: $\{longestStreak\} days</span>\
                            <span>$\{getCompletionPercentage(habit.id)\}% this week</span>\
                        </div>\
                    </div>\
                `;\
            \}).join('');\
        \}\
\
        function markHabit(habitId, status) \{\
            const today = getTodayIST();\
            const existingCheckin = getCheckinForDate(habitId, today);\
            const note = document.getElementById(`note-$\{habitId\}`)?.value || '';\
\
            if (existingCheckin) \{\
                // Update existing checkin\
                existingCheckin.status = status;\
                existingCheckin.note = note;\
                existingCheckin.updated = new Date().toISOString();\
            \} else \{\
                // Create new checkin\
                const checkin = \{\
                    id: Date.now() + Math.random(),\
                    habitId: habitId,\
                    date: today,\
                    status: status,\
                    note: note,\
                    created: new Date().toISOString()\
                \};\
                checkins.push(checkin);\
            \}\
\
            saveData();\
            renderTodayHabits();\
            updateInsights();\
            \
            // Show encouraging message\
            if (status === 'done') \{\
                const habit = habits.find(h => h.id === habitId);\
                const newStreak = getCurrentStreak(habitId);\
                showToast(`$\{habit.emoji\} Great! $\{newStreak\} day streak!`);\
            \}\
        \}\
\
        function snoozeHabit(habitId) \{\
            const habit = habits.find(h => h.id === habitId);\
            if (habit && 'Notification' in window && Notification.permission === 'granted') \{\
                // Schedule reminder in 1 hour\
                setTimeout(() => \{\
                    new Notification(`Reminder: $\{habit.name\}`, \{\
                        body: `Itna bas kar lo \'97 $\{habit.name\}`,\
                        icon: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNDAiIGhlaWdodD0iMjQwIj48Y2lyY2xlIGN4PSIxMjAiIGN5PSIxMjAiIHI9IjEwMCIgZmlsbD0iIzEwYjk4MSIgLz48L3N2Zz4='\
                    \});\
                \}, 60 * 60 * 1000); // 1 hour\
            \}\
            showToast('\uc0\u9200  Reminder set for 1 hour!');\
        \}\
\
        function openHabitModal(habitId = null) \{\
            editingHabitId = habitId;\
            const modal = document.getElementById('habitModal');\
            const header = modal.querySelector('.modal-header');\
            \
            if (habitId) \{\
                const habit = habits.find(h => h.id === habitId);\
                header.textContent = 'Edit Habit';\
                \
                // Populate form with existing data\
                document.getElementById('habitName').value = habit.name;\
                document.getElementById('preferredTime').value = habit.preferredTime;\
                document.getElementById('targetStreak').value = habit.targetStreak || '';\
                document.getElementById('habitNotes').value = habit.notes || '';\
                \
                selectedEmoji = habit.emoji;\
                selectedColor = habit.color;\
                selectedFrequency = habit.frequency;\
                selectedDays = habit.daysOfWeek || [];\
                \
                // Update UI selections\
                updateModalSelections();\
            \} else \{\
                header.textContent = 'Naya Habit Add Karo';\
                resetModalForm();\
            \}\
            \
            modal.classList.add('active');\
        \}\
\
        function closeHabitModal() \{\
            document.getElementById('habitModal').classList.remove('active');\
            resetModalForm();\
        \}\
\
        function resetModalForm() \{\
            document.getElementById('habitName').value = '';\
            document.getElementById('preferredTime').value = '09:00';\
            document.getElementById('targetStreak').value = '';\
            document.getElementById('habitNotes').value = '';\
            document.getElementById('timesPerWeek').value = '3';\
            \
            selectedEmoji = '\uc0\u55357 \u56487 ';\
            selectedColor = '#10b981';\
            selectedFrequency = 'daily';\
            selectedDays = [];\
            editingHabitId = null;\
            \
            updateModalSelections();\
        \}\
\
        function updateModalSelections() \{\
            // Update emoji selection\
            document.querySelectorAll('.emoji-option').forEach(option => \{\
                option.classList.toggle('selected', option.dataset.emoji === selectedEmoji);\
            \});\
            \
            // Update color selection\
            document.querySelectorAll('.color-option').forEach(option => \{\
                option.classList.toggle('selected', option.dataset.color === selectedColor);\
            \});\
            \
            // Update frequency selection\
            document.querySelectorAll('.frequency-btn').forEach(btn => \{\
                btn.classList.toggle('selected', btn.dataset.freq === selectedFrequency);\
            \});\
            \
            // Update days selection\
            document.querySelectorAll('.day-btn').forEach(btn => \{\
                const day = parseInt(btn.dataset.day);\
                btn.classList.toggle('selected', selectedDays.includes(day));\
            \});\
            \
            // Show/hide relevant sections\
            const daysSelector = document.getElementById('daysSelector');\
            const weeklyTarget = document.getElementById('weeklyTarget');\
            \
            daysSelector.style.display = selectedFrequency === 'specific' ? 'block' : 'none';\
            weeklyTarget.style.display = selectedFrequency === 'weekly' ? 'block' : 'none';\
        \}\
\
        function saveHabit() \{\
            const name = document.getElementById('habitName').value.trim();\
            const preferredTime = document.getElementById('preferredTime').value;\
            const targetStreak = parseInt(document.getElementById('targetStreak').value) || null;\
            const notes = document.getElementById('habitNotes').value.trim();\
            const timesPerWeek = parseInt(document.getElementById('timesPerWeek').value) || 3;\
\
            if (!name) \{\
                showToast('\uc0\u10060  Habit name required!');\
                return;\
            \}\
\
            if (selectedFrequency === 'specific' && selectedDays.length === 0) \{\
                showToast('\uc0\u10060  Please select at least one day!');\
                return;\
            \}\
\
            const habitData = \{\
                name,\
                emoji: selectedEmoji,\
                color: selectedColor,\
                frequency: selectedFrequency,\
                daysOfWeek: selectedFrequency === 'specific' ? selectedDays : [],\
                timesPerWeek: selectedFrequency === 'weekly' ? timesPerWeek : null,\
                preferredTime,\
                reminders: true,\
                targetStreak,\
                notes,\
                archived: false\
            \};\
\
            if (editingHabitId) \{\
                // Update existing habit\
                const habitIndex = habits.findIndex(h => h.id === editingHabitId);\
                habits[habitIndex] = \{ ...habits[habitIndex], ...habitData \};\
                showToast('\uc0\u9989  Habit updated!');\
            \} else \{\
                // Create new habit\
                const habit = \{\
                    id: Date.now() + Math.random(),\
                    ...habitData,\
                    startDate: getTodayIST(),\
                    created: new Date().toISOString()\
                \};\
                habits.push(habit);\
                showToast('\uc0\u55356 \u57225  New habit created!');\
            \}\
\
            saveData();\
            closeHabitModal();\
            renderTodayHabits();\
            updateInsights();\
        \}\
\
        function updateInsights() \{\
            updateWeeklyStats();\
            updateTopStreaks();\
            updateNudgeCards();\
        \}\
\
        function updateWeeklyStats() \{\
            const weekStart = getWeekStart();\
            const weekDays = Array.from(\{length: 7\}, (_, i) => \{\
                const date = new Date(weekStart);\
                date.setDate(date.getDate() + i);\
                return formatDate(date);\
            \});\
\
            let totalPlanned = 0;\
            let totalCompleted = 0;\
\
            habits.forEach(habit => \{\
                if (habit.archived) return;\
                \
                weekDays.forEach(date => \{\
                    if (isHabitPlannedForDate(habit, date)) \{\
                        totalPlanned++;\
                        const checkin = getCheckinForDate(habit.id, date);\
                        if (checkin?.status === 'done') \{\
                            totalCompleted++;\
                        \}\
                    \}\
                \});\
            \});\
\
            const completionRate = totalPlanned > 0 ? Math.round((totalCompleted / totalPlanned) * 100) : 0;\
            const consistencyScore = Math.min(100, completionRate + (getCurrentStreakCount() * 5));\
\
            document.getElementById('weeklyCompletion').textContent = `$\{completionRate\}%`;\
            document.getElementById('consistencyScore').textContent = consistencyScore;\
        \}\
\
        function updateTopStreaks() \{\
            const container = document.getElementById('topStreaks');\
            const streakData = habits\
                .filter(h => !h.archived)\
                .map(habit => (\{\
                    habit,\
                    streak: getCurrentStreak(habit.id)\
                \}))\
                .sort((a, b) => b.streak - a.streak)\
                .slice(0, 3);\
\
            if (streakData.length === 0) \{\
                container.innerHTML = '<p style="color: #6b7280; text-align: center;">No streaks yet. Start building!</p>';\
                return;\
            \}\
\
            container.innerHTML = streakData.map((item, index) => `\
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 8px 0;">\
                    <div style="display: flex; align-items: center;">\
                        <span style="margin-right: 8px;">$\{item.habit.emoji\}</span>\
                        <span>$\{item.habit.name\}</span>\
                    </div>\
                    <div style="font-weight: 600; color: $\{item.habit.color\};">\
                        $\{item.streak\} days $\{index === 0 ? '\uc0\u55357 \u56401 ' : ''\}\
                    </div>\
                </div>\
            `).join('');\
        \}\
\
        function updateNudgeCards() \{\
            const container = document.getElementById('nudgeCards');\
            const nudges = [];\
\
            habits.forEach(habit => \{\
                if (habit.archived) return;\
                \
                const currentStreak = getCurrentStreak(habit.id);\
                const longestStreak = getLongestStreak(habit.id);\
                \
                // Close to longest streak\
                if (currentStreak > 0 && currentStreak === longestStreak - 1) \{\
                    nudges.push(`\uc0\u55357 \u56613  $\{habit.emoji\} You're 1 day from your longest $\{habit.name\} streak!`);\
                \}\
                \
                // Milestone approaching\
                if (currentStreak > 0 && (currentStreak + 1) % 7 === 0) \{\
                    nudges.push(`\uc0\u55356 \u57263  $\{habit.emoji\} $\{currentStreak + 1\} days of $\{habit.name\} coming up!`);\
                \}\
                \
                // Target streak approaching\
                if (habit.targetStreak && currentStreak > 0 && currentStreak >= habit.targetStreak - 3) \{\
                    nudges.push(`\uc0\u55356 \u57286  $\{habit.emoji\} Only $\{habit.targetStreak - currentStreak\} days to your $\{habit.name\} goal!`);\
                \}\
            \});\
\
            if (nudges.length === 0) \{\
                container.innerHTML = '';\
                return;\
            \}\
\
            container.innerHTML = nudges.slice(0, 3).map(nudge => `\
                <div class="nudge-card">\
                    <div class="nudge-text">$\{nudge\}</div>\
                </div>\
            `).join('');\
        \}\
\
        // Utility functions\
        function getTodayIST() \{\
            const now = new Date();\
            const istOffset = 5.5 * 60 * 60 * 1000; // IST is UTC+5:30\
            const istTime = new Date(now.getTime() + istOffset);\
            return formatDate(istTime);\
        \}\
\
        function formatDate(date) \{\
            return date.toISOString().split('T')[0];\
        \}\
\
        function formatTime(time) \{\
            const [hours, minutes] = time.split(':');\
            const hour = parseInt(hours);\
            const ampm = hour >= 12 ? 'PM' : 'AM';\
            const displayHour = hour % 12 || 12;\
            return `$\{displayHour\}:$\{minutes\} $\{ampm\}`;\
        \}\
\
        function getWeekStart() \{\
            const now = new Date();\
            const day = now.getDay();\
            const diff = now.getDate() - day;\
            return new Date(now.setDate(diff));\
        \}\
\
        function isHabitPlannedForDate(habit, date) \{\
            const habitDate = new Date(date);\
            const startDate = new Date(habit.startDate);\
            \
            if (habitDate < startDate) return false;\
            \
            if (habit.frequency === 'daily') return true;\
            if (habit.frequency === 'specific') \{\
                return habit.daysOfWeek.includes(habitDate.getDay());\
            \}\
            if (habit.frequency === 'weekly') \{\
                // For weekly habits, we consider them planned every day\
                // The user can complete them any day of the week\
                return true;\
            \}\
            \
            return false;\
        \}\
\
        function getCheckinForDate(habitId, date) \{\
            return checkins.find(c => c.habitId === habitId && c.date === date);\
        \}\
\
        function getCurrentStreak(habitId) \{\
            const habit = habits.find(h => h.id === habitId);\
            if (!habit) return 0;\
            \
            let streak = 0;\
            let currentDate = new Date();\
            \
            while (true) \{\
                const dateStr = formatDate(currentDate);\
                \
                if (isHabitPlannedForDate(habit, dateStr)) \{\
                    const checkin = getCheckinForDate(habitId, dateStr);\
                    if (checkin?.status === 'done' || checkin?.status === 'skipped') \{\
                        streak++;\
                    \} else \{\
                        break;\
                    \}\
                \}\
                \
                currentDate.setDate(currentDate.getDate() - 1);\
                \
                // Don't go back more than 365 days\
                if (streak > 365) break;\
            \}\
            \
            return streak;\
        \}\
\
        function getLongestStreak(habitId) \{\
            const habit = habits.find(h => h.id === habitId);\
            if (!habit) return 0;\
            \
            const habitCheckins = checkins\
                .filter(c => c.habitId === habitId && (c.status === 'done' || c.status === 'skipped'))\
                .sort((a, b) => new Date(a.date) - new Date(b.date));\
            \
            let longestStreak = 0;\
            let currentStreak = 0;\
            let lastDate = null;\
            \
            habitCheckins.forEach(checkin => \{\
                const checkinDate = new Date(checkin.date);\
                \
                if (lastDate) \{\
                    const daysDiff = Math.floor((checkinDate - lastDate) / (1000 * 60 * 60 * 24));\
                    \
                    if (daysDiff === 1 || (daysDiff <= 7 && habit.frequency === 'weekly')) \{\
                        currentStreak++;\
                    \} else \{\
                        longestStreak = Math.max(longestStreak, currentStreak);\
                        currentStreak = 1;\
                    \}\
                \} else \{\
                    currentStreak = 1;\
                \}\
                \
                lastDate = checkinDate;\
            \});\
            \
            return Math.max(longestStreak, currentStreak);\
        \}\
\
        function getCompletionPercentage(habitId) \{\
            const weekStart = getWeekStart();\
            const weekDays = Array.from(\{length: 7\}, (_, i) => \{\
                const date = new Date(weekStart);\
                date.setDate(date.getDate() + i);\
                return formatDate(date);\
            \});\
\
            const habit = habits.find(h => h.id === habitId);\
            if (!habit) return 0;\
\
            let planned = 0;\
            let completed = 0;\
\
            weekDays.forEach(date => \{\
                if (isHabitPlannedForDate(habit, date)) \{\
                    planned++;\
                    const checkin = getCheckinForDate(habitId, date);\
                    if (checkin?.status === 'done') \{\
                        completed++;\
                    \}\
                \}\
            \});\
\
            return planned > 0 ? Math.round((completed / planned) * 100) : 0;\
        \}\
\
        function getCurrentStreakCount() \{\
            return habits.reduce((sum, habit) => sum + (getCurrentStreak(habit.id) > 0 ? 1 : 0), 0);\
        \}\
\
        function showToast(message) \{\
            // Create toast element\
            const toast = document.createElement('div');\
            toast.style.cssText = `\
                position: fixed;\
                top: 20px;\
                left: 50%;\
                transform: translateX(-50%);\
                background: #1f2937;\
                color: white;\
                padding: 12px 20px;\
                border-radius: 8px;\
                font-size: 14px;\
                z-index: 10000;\
                opacity: 0;\
                transition: opacity 0.3s;\
            `;\
            toast.textContent = message;\
            \
            document.body.appendChild(toast);\
            \
            // Animate in\
            setTimeout(() => toast.style.opacity = '1', 100);\
            \
            // Remove after 3 seconds\
            setTimeout(() => \{\
                toast.style.opacity = '0';\
                setTimeout(() => document.body.removeChild(toast), 300);\
            \}, 3000);\
        \}\
\
        function toggleSetting(setting) \{\
            const toggle = event.target.closest('.toggle');\
            const isActive = toggle.classList.contains('active');\
            \
            settings[setting] = !isActive;\
            toggle.classList.toggle('active');\
            \
            saveData();\
            \
            if (setting === 'notifications' && settings.notifications) \{\
                // Request notification permission\
                if ('Notification' in window && Notification.permission === 'default') \{\
                    Notification.requestPermission();\
                \}\
            \}\
        \}\
\
        function exportData() \{\
            const csvData = [\
                ['Date', 'Habit', 'Status', 'Note'],\
                ...checkins.map(checkin => \{\
                    const habit = habits.find(h => h.id === checkin.habitId);\
                    return [\
                        checkin.date,\
                        habit ? habit.name : 'Unknown',\
                        checkin.status,\
                        checkin.note || ''\
                    ];\
                \})\
            ];\
            \
            const csvContent = csvData.map(row => \
                row.map(field => `"$\{field\}"`).join(',')\
            ).join('\\n');\
            \
            const blob = new Blob([csvContent], \{ type: 'text/csv' \});\
            const url = URL.createObjectURL(blob);\
            const a = document.createElement('a');\
            a.href = url;\
            a.download = `habit-tracker-$\{getTodayIST()\}.csv`;\
            a.click();\
            URL.revokeObjectURL(url);\
            \
            showToast('\uc0\u55357 \u56522  Data exported successfully!');\
        \}\
\
        function backupData() \{\
            const backupData = \{\
                habits,\
                checkins,\
                settings,\
                exportDate: new Date().toISOString()\
            \};\
            \
            const blob = new Blob([JSON.stringify(backupData, null, 2)], \{ type: 'application/json' \});\
            const url = URL.createObjectURL(blob);\
            const a = document.createElement('a');\
            a.href = url;\
            a.download = `habit-tracker-backup-$\{getTodayIST()\}.json`;\
            a.click();\
            URL.revokeObjectURL(url);\
            \
            showToast('\uc0\u55357 \u56510  Backup created successfully!');\
        \}\
\
        function restoreData() \{\
            const input = document.createElement('input');\
            input.type = 'file';\
            input.accept = '.json';\
            \
            input.onchange = function(e) \{\
                const file = e.target.files[0];\
                if (!file) return;\
                \
                const reader = new FileReader();\
                reader.onload = function(e) \{\
                    try \{\
                        const backupData = JSON.parse(e.target.result);\
                        \
                        if (backupData.habits && backupData.checkins) \{\
                            habits = backupData.habits;\
                            checkins = backupData.checkins;\
                            if (backupData.settings) \{\
                                settings = \{ ...settings, ...backupData.settings \};\
                            \}\
                            \
                            saveData();\
                            renderTodayHabits();\
                            updateInsights();\
                            \
                            showToast('\uc0\u55357 \u56549  Data restored successfully!');\
                        \} else \{\
                            showToast('\uc0\u10060  Invalid backup file!');\
                        \}\
                    \} catch (error) \{\
                        showToast('\uc0\u10060  Error reading backup file!');\
                    \}\
                \};\
                reader.readAsText(file);\
            \};\
            \
            input.click();\
        \}\
\
        // Schedule notifications (simplified version)\
        function scheduleNotifications() \{\
            if (!settings.notifications || !('Notification' in window) || Notification.permission !== 'granted') \{\
                return;\
            \}\
\
            habits.forEach(habit => \{\
                if (habit.archived || !habit.reminders) return;\
                \
                const today = getTodayIST();\
                if (!isHabitPlannedForDate(habit, today)) return;\
                \
                const checkin = getCheckinForDate(habit.id, today);\
                if (checkin?.status === 'done') return;\
                \
                // Schedule notification for preferred time\
                const [hours, minutes] = habit.preferredTime.split(':');\
                const notificationTime = new Date();\
                notificationTime.setHours(parseInt(hours), parseInt(minutes), 0, 0);\
                \
                // If time has passed, schedule for tomorrow\
                if (notificationTime <= new Date()) \{\
                    notificationTime.setDate(notificationTime.getDate() + 1);\
                \}\
                \
                const timeUntilNotification = notificationTime.getTime() - Date.now();\
                \
                if (timeUntilNotification > 0 && timeUntilNotification < 24 * 60 * 60 * 1000) \{\
                    setTimeout(() => \{\
                        new Notification(`Time for $\{habit.name\}!`, \{\
                            body: `Itna bas kar lo \'97 $\{habit.name\}`,\
                            icon: 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNDAiIGhlaWdodD0iMjQwIj48Y2lyY2xlIGN4PSIxMjAiIGN5PSIxMjAiIHI9IjEwMCIgZmlsbD0iIzEwYjk4MSIgLz48L3N2Zz4=',\
                            tag: `habit-$\{habit.id\}`\
                        \});\
                    \}, timeUntilNotification);\
                \}\
            \});\
        \}\
\
        // Schedule notifications on load\
        setTimeout(scheduleNotifications, 1000);\
        \
        // Re-schedule notifications every hour\
        setInterval(scheduleNotifications, 60 * 60 * 1000);\
    </script>\
<script>(function()\{function c()\{var b=a.contentDocument||a.contentWindow.document;if(b)\{var d=b.createElement('script');d.innerHTML="window.__CF$cv$params=\{r:'988e210a6534a7ce',t:'MTc1OTUxMjIyNC4wMDAwMDA='\};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)\}\}if(document.body)\{var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else\{var e=document.onreadystatechange||function()\{\};document.onreadystatechange=function(b)\{e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())\}\}\}\})();</script></body>\
</html>\
}